<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="egovframework.example.login.service.impl.LoginManageMapper">

	<update id="updateRequiredAgreeInfo" parameterType="hashmap">
		update survey.comtnmber
		set CONFM_AT = 'Y'
		where USER_ID = #{uniqId};
	</update>
	
	<select id="selectUserById" parameterType="hashmap" resultType="loginVO">
		select
			USER_SE_CODE as id,
			USER_NM as name,
			PHOTO_STRE_FILE_NM as profileImageId,
			TEACHER_SE_CODE as userType,
			SCHUL_CODE as userSpaceInfo,
			concat(ST_GRADE, '학년 ', ST_CLASS, '반') as userSpaceOrgInfo,
			USER_ID as uniqId,
			CONFM_AT as isFirstInvite,
			SEXDSTN as sex,
			EMAIL_ADRES as userEmail
		from survey.comtnmber
		where USER_ID = #{uniqId}
	</select>
	
</mapper>