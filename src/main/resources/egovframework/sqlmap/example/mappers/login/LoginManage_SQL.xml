<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="egovframework.example.login.service.impl.LoginManageMapper">

	<update id="updateRequiredAgreeInfo" parameterType="hashmap">
		UPDATE COMTNMBER
		SET CONFM_AT = 'Y'
		WHERE USER_ID = #{uniqId};
	</update>
	
	<select id="selectUserById" parameterType="accountDTO" resultType="loginVO">
		select
			USER_SE_CODE as id,
			USER_NM as name,
			PASSWORD as password,
			PHOTO_STRE_FILE_NM as profileImageId,
			TEACHER_SE_CODE as userType,
			SCHUL_CODE as userSpaceInfo,
			ST_GRADE as gradeNm,
			ST_CLASS as classNm,
			USER_ID as uniqId,
			SEXDSTN as sex,
			EMAIL_ADRES as userEmail,
			case when TEACHER_SE_CODE = 'Y' then 'teacher' else 'student' end as userRole
		from COMTNMBER
		where USER_SE_CODE = #{id};
	</select>
	
</mapper>